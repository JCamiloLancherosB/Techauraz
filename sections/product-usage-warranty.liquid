{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="product-usage-warranty section-{{ section.id }}-padding">
  <div class="product-usage-warranty__container page-width">
    
    {%- comment -%} Secci√≥n: C√≥mo se usa {%- endcomment -%}
    {% if section.settings.show_usage_section %}
      <div class="product-usage-warranty__section">
        {% if section.settings.usage_heading != blank %}
          <h2 class="product-usage-warranty__heading">{{ section.settings.usage_heading }}</h2>
        {% endif %}

        {% if section.blocks.size > 0 %}
          <div class="product-usage-warranty__steps">
            {% for block in section.blocks %}
              {% if block.type == 'usage_step' %}
                <div class="product-usage-warranty__step" {{ block.shopify_attributes }}>
                  <div class="product-usage-warranty__step-number">
                    <span aria-label="Paso {{ forloop.index }}">{{ forloop.index }}</span>
                  </div>
                  <div class="product-usage-warranty__step-content">
                    <h3 class="product-usage-warranty__step-title">{{ block.settings.title }}</h3>
                    {% if block.settings.description != blank %}
                      <p class="product-usage-warranty__step-description">{{ block.settings.description }}</p>
                    {% endif %}
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% else %}
          <div class="product-usage-warranty__placeholder">
            <p>Configura los pasos de uso desde el Theme Editor para que los clientes sepan c√≥mo usar el producto.</p>
          </div>
        {% endif %}
      </div>
    {% endif %}

    {%- comment -%} Secci√≥n: Garant√≠a y Soporte {%- endcomment -%}
    {% if section.settings.show_warranty_section %}
      <div class="product-usage-warranty__section product-usage-warranty__warranty">
        {% if section.settings.warranty_heading != blank %}
          <h2 class="product-usage-warranty__heading">{{ section.settings.warranty_heading }}</h2>
        {% endif %}

        <div class="product-usage-warranty__warranty-grid">
          {%- comment -%} Garant√≠a {%- endcomment -%}
          <div class="product-usage-warranty__warranty-card">
            <div class="product-usage-warranty__warranty-icon">
              <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 2.5L5 10v12.5c0 11 7.5 21.25 15 25 7.5-3.75 15-14 15-25V10L20 2.5zm8.75 16.25l-11.25 11.25-6.25-6.25 1.875-1.875L17.5 26.25l9.375-9.375L28.75 18.75z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="product-usage-warranty__warranty-title">
              {{ section.settings.warranty_period_label | default: "Garant√≠a de 1 mes" }}
            </h3>
            <p class="product-usage-warranty__warranty-text">
              {{ section.settings.warranty_description | default: "Todos nuestros productos incluyen garant√≠a de 1 mes contra defectos de fabricaci√≥n. Si algo falla, te lo reemplazamos sin costo." }}
            </p>
          </div>

          {%- comment -%} Soporte WhatsApp {%- endcomment -%}
          <div class="product-usage-warranty__warranty-card product-usage-warranty__warranty-card--whatsapp">
            <div class="product-usage-warranty__warranty-icon product-usage-warranty__warranty-icon--whatsapp">
              <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M29.12 23.97c-.53-.26-3.15-1.55-3.64-1.73-.49-.18-.84-.26-1.19.26-.35.53-1.36 1.73-1.67 2.08-.31.35-.62.39-1.15.13-.53-.26-2.24-.83-4.27-2.63-1.58-1.4-2.65-3.13-2.96-3.66-.31-.53-.03-.82.23-1.08.24-.24.53-.62.79-.93.26-.31.35-.53.53-.88.18-.35.09-.66-.04-.93-.13-.26-.79-1.91-1.08-2.62-.28-.69-.57-.6-.79-.61h-.67c-.35 0-.92.13-1.4.66-.49.53-1.87 1.82-1.87 4.44 0 2.62 1.91 5.15 2.18 5.5.26.35 3.71 5.66 8.99 7.94 1.26.54 2.24.86 3.01 1.1 1.27.4 2.42.34 3.33.21 1.02-.15 3.15-.129 3.6-2.54.45-1.25.45-2.32.31-2.54-.14-.22-.49-.35-1.02-.61zM20 36.48h-.01c-3.49-.01-6.91-1.02-9.9-2.94l-.71-.42-7.36 1.93 1.96-7.18-.46-.74c-2.1-3.35-3.21-7.23-3.21-11.21C.31 8.1 8.92-.5 19.74-.5c5.25.01 10.19 2.05 13.91 5.78 3.72 3.73 5.77 8.68 5.76 13.94-.01 10.82-8.62 19.42-19.41 19.42V36.48z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="product-usage-warranty__warranty-title">
              {{ section.settings.whatsapp_label | default: "Soporte por WhatsApp" }}
            </h3>
            <p class="product-usage-warranty__warranty-text">
              {{ section.settings.whatsapp_description | default: "¬øDudas o necesitas ayuda? Escr√≠benos por WhatsApp y te atendemos de inmediato." }}
            </p>
            {% if section.settings.whatsapp_phone != blank %}
              {% assign phone = section.settings.whatsapp_phone %}
              {% assign message = section.settings.whatsapp_message | default: "Hola! Necesito ayuda con un producto" | url_encode %}
              {% assign whatsapp_url = "https://wa.me/" | append: phone | append: "?text=" | append: message %}
              <a href="{{ whatsapp_url }}" 
                 class="product-usage-warranty__whatsapp-button" 
                 target="_blank" 
                 rel="noopener noreferrer">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.472 14.382C17.155 14.223 15.588 13.456 15.294 13.347C15 13.238 14.788 13.183 14.577 13.5C14.365 13.817 13.773 14.533 13.587 14.745C13.401 14.957 13.215 14.982 12.898 14.823C12.581 14.664 11.556 14.331 10.329 13.238C9.372 12.388 8.722 11.341 8.536 11.024C8.35 10.707 8.515 10.535 8.673 10.378C8.815 10.236 8.99 10.007 9.149 9.821C9.308 9.635 9.363 9.5 9.472 9.288C9.581 9.076 9.527 8.89 9.447 8.731C9.367 8.572 8.722 7.003 8.454 6.369C8.186 5.735 7.918 5.826 7.732 5.818H7.186C6.975 5.818 6.657 5.898 6.363 6.215C6.069 6.532 5.251 7.299 5.251 8.868C5.251 10.437 6.389 11.957 6.548 12.169C6.707 12.381 8.722 15.446 11.77 16.869C12.529 17.213 13.123 17.415 13.589 17.564C14.347 17.806 15.037 17.772 15.585 17.689C16.197 17.598 17.472 16.919 17.74 16.17C18.008 15.421 18.008 14.782 17.928 14.648C17.848 14.514 17.636 14.434 17.319 14.275L17.472 14.382ZM12.0001 21.789H11.996C10.241 21.789 8.527 21.311 7.03 20.409L6.676 20.195L2.882 21.151L3.855 17.466L3.62 17.098C2.63 15.55 2.101 13.762 2.102 11.922C2.104 6.485 6.564 2.026 12.004 2.026C14.657 2.027 17.165 3.06 19.053 4.95C20.941 6.84 21.972 9.349 21.971 12.002C21.969 17.439 17.509 21.898 12.069 21.898L12.0001 21.789Z" fill="currentColor"/>
                </svg>
                {{ section.settings.whatsapp_button_text | default: "Contactar por WhatsApp" }}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Uso y Garant√≠a",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Secci√≥n: C√≥mo se usa"
    },
    {
      "type": "checkbox",
      "id": "show_usage_section",
      "label": "Mostrar secci√≥n de uso",
      "default": true
    },
    {
      "type": "text",
      "id": "usage_heading",
      "label": "T√≠tulo de la secci√≥n",
      "default": "üîß C√≥mo se usa"
    },
    {
      "type": "header",
      "content": "Secci√≥n: Garant√≠a y Soporte"
    },
    {
      "type": "checkbox",
      "id": "show_warranty_section",
      "label": "Mostrar secci√≥n de garant√≠a",
      "default": true
    },
    {
      "type": "text",
      "id": "warranty_heading",
      "label": "T√≠tulo de la secci√≥n",
      "default": "üõ°Ô∏è Garant√≠a y Soporte"
    },
    {
      "type": "text",
      "id": "warranty_period_label",
      "label": "Texto de garant√≠a",
      "default": "Garant√≠a de 1 mes"
    },
    {
      "type": "textarea",
      "id": "warranty_description",
      "label": "Descripci√≥n de garant√≠a",
      "default": "Todos nuestros productos incluyen garant√≠a de 1 mes contra defectos de fabricaci√≥n. Si algo falla, te lo reemplazamos sin costo."
    },
    {
      "type": "text",
      "id": "whatsapp_label",
      "label": "T√≠tulo de WhatsApp",
      "default": "Soporte por WhatsApp"
    },
    {
      "type": "textarea",
      "id": "whatsapp_description",
      "label": "Descripci√≥n de WhatsApp",
      "default": "¬øDudas o necesitas ayuda? Escr√≠benos por WhatsApp y te atendemos de inmediato."
    },
    {
      "type": "text",
      "id": "whatsapp_phone",
      "label": "N√∫mero de WhatsApp",
      "default": "+573008602789",
      "info": "Formato internacional: +57XXXXXXXXXX"
    },
    {
      "type": "text",
      "id": "whatsapp_message",
      "label": "Mensaje predeterminado",
      "default": "Hola! Necesito ayuda con un producto"
    },
    {
      "type": "text",
      "id": "whatsapp_button_text",
      "label": "Texto del bot√≥n de WhatsApp",
      "default": "Contactar por WhatsApp"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Espaciado superior",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Espaciado inferior",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "usage_step",
      "name": "Paso de Uso",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "T√≠tulo del paso",
          "default": "Paso de instrucci√≥n"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Descripci√≥n del paso",
          "default": "Explica c√≥mo realizar este paso"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Uso y Garant√≠a",
      "blocks": [
        {
          "type": "usage_step",
          "settings": {
            "title": "Conecta el dispositivo",
            "description": "Conecta el cable USB al puerto correspondiente"
          }
        },
        {
          "type": "usage_step",
          "settings": {
            "title": "Enciende el producto",
            "description": "Presiona el bot√≥n de encendido durante 3 segundos"
          }
        },
        {
          "type": "usage_step",
          "settings": {
            "title": "Configura seg√∫n tus necesidades",
            "description": "Sigue las instrucciones en pantalla para personalizar"
          }
        }
      ]
    }
  ]
}
{% endschema %}
