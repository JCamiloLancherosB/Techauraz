<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
<head>
<!-- PRECONNECT and DNS Prefetch - Critical for performance -->
<link rel="preconnect" href="https://cdn.shopify.com" crossorigin>
<link rel="dns-prefetch" href="https://cdn.shopify.com">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://connect.facebook.net">

<!-- Preload critical JavaScript -->
<link rel="modulepreload" href="{{ 'theme-editor.js' | asset_url }}">

<!-- Note: Image preloading should be done in sections, not in layout -->
{%- comment -%}
<!-- Preload de la primera imagen visible (hero) -->
{% if section.settings.image %}
  <link rel="preload" as="image" loading="eager"
    fetchpriority="high" href="{{ section.settings.image | image_url: width: 1920, quality: 85, format: 'webp' }}" imagesrcset="{{ section.settings.image | image_url: width: 750, quality: 85, format: 'webp' }} 750w, {{ section.settings.image | image_url: width: 1920, quality: 85, format: 'webp' }} 1920w" imagesizes="100vw">
{% endif %}

<!-- Preload del logo -->
<link rel="preload" as="image" href="{{ section.settings.logo | image_url: width: 200, quality: 85, format: 'webp' }}">
{%- endcomment -%}
    <!-- Meta Tags Básicos -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="">
    <link rel="canonical" href="{{ canonical_url }}">

    {% if page_description %}
  <meta name="description" content="{{ page_description | escape }}">
{% endif %}
    
    <!-- Localización Colombia -->
    <meta name="geo.region" content="CO">
    <meta name="geo.placename" content="Colombia">
    <meta name="geo.position" content="4.570868;-74.297333">
    <meta name="ICBM" content="4.570868, -74.297333">
    <meta name="country" content="Colombia">
    <meta name="language" content="es-CO">
    <meta name="distribution" content="Colombia">
    
    <!-- SEO Esencial TechAura -->
    <meta name="description" content="TechAura - Tienda líder en Colombia de productos tecnológicos: memorias USB personalizadas, gadgets electrónicos, smartwatches y accesorios tecnológicos con envío a todo el país">
    <meta name="keywords" content="tecnología Colombia, memorias USB personalizadas, gadgets electrónicos, smartwatches, accesorios tecnológicos, tienda tech Colombia, productos electrónicos">
    <meta name="author" content="TechAura">
    <meta name="robots" content="index, follow">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="TechAura - Tecnología y Gadgets en Colombia">
    <meta property="og:description" content="Encuentra los mejores productos tecnológicos en Colombia: memorias USB personalizadas, smartwatches, gadgets y más con envío nacional">
    <meta property="og:url" content="{{ canonical_url }}">
    <meta property="og:site_name" content="TechAura Colombia">
    <meta property="og:locale" content="es_CO">
    <meta property="og:country-name" content="Colombia">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TechAura - Tecnología en Colombia">
    <meta name="twitter:description" content="Productos tecnológicos y gadgets con envío a todo Colombia">
    <meta name="twitter:site" content="@techauraz">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "TechAura",
      "alternateName": "Techauraz",
      "url": "{{ shop.url }}",
      {% comment %} "logo": "{{ 'logo.png' | asset_url }}", {% endcomment %}
      "description": "Tienda líder en Colombia de productos tecnológicos: memorias USB personalizadas, gadgets electrónicos, smartwatches y accesorios tech con envío gratis",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "CO",
        "addressRegion": "Colombia"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+57-300-860-2789",
        "contactType": "customer service",
        "areaServed": "CO",
        "availableLanguage": ["Spanish"]
      },
      "sameAs": [
        "{{ settings.social_facebook_link }}",
        "{{ settings.social_instagram_link }}",
        "{{ settings.social_twitter_link }}"
      ]
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "TechAura",
      "url": "{{ shop.url }}",
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "{{ shop.url }}/search?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    {%- if template.name == 'product' and product -%}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Product",
      "name": {{ product.title | json }},
      "description": {{ product.description | strip_html | truncate: 250 | json }},
      "image": {{ product.featured_image | image_url: width: 1200 | json }},
      "url": "{{ shop.url }}{{ product.url }}",
      "brand": {
        "@type": "Brand",
        "name": "TechAura"
      },
      "offers": {
        "@type": "Offer",
        "url": "{{ shop.url }}{{ product.url }}",
        "priceCurrency": "COP",
        "price": "{{ product.selected_or_first_available_variant.price | divided_by: 100.0 }}",
        "availability": "{% if product.available %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}",
        "seller": {
          "@type": "Organization",
          "name": "TechAura"
        },
        "priceValidUntil": "{{ 'now' | date: '%s' | plus: 2592000 | date: '%Y-%m-%d' }}",
        "shippingDetails": {
          "@type": "OfferShippingDetails",
          "shippingRate": {
            "@type": "MonetaryAmount",
            "value": "0",
            "currency": "COP"
          },
          "shippingDestination": {
            "@type": "DefinedRegion",
            "addressCountry": "CO"
          },
          "deliveryTime": {
            "@type": "ShippingDeliveryTime",
            "businessDays": {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"]
            },
            "cutoffTime": "23:59:59",
            "handlingTime": {
              "@type": "QuantitativeValue",
              "minValue": 2,
              "maxValue": 5,
              "unitCode": "DAY"
            }
          }
        }
      }
    }
    </script>
    {%- endif -%}

    <!-- Favicon -->
    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32, quality: 85, format: 'webp' }}">
    {%- endif -%}

    <!-- Preconnect para fuentes -->
    {%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {%- endunless -%}

    <!-- Título y Meta Description Dinámicos -->
    {%- assign path_parts = request.path | split: '/' -%}
    {%- assign base_path = path_parts | last -%}
    {%- unless request.page_type == 'list-collections' or request.page_type == 'collection' and base_path == 'all' -%}
    <title>
        TechAura - Tecnología y Gadgets en Colombia | Envío Nacional
    </title>
    {%- endunless -%}
    
    <!-- Preload_tag critical resources -->
    <link rel="preload" as="script" href="{{ 'global.js' | asset_url }}">
    
    <!-- DNS prefetch para external domains -->
<link rel="dns-prefetch" href="https://fonts.shopifycdn.com">
<link rel="dns-prefetch" href="https://cdn.shopify.com">

    <!-- Meta Tags de Shopify -->
    {% render 'meta-tags' %}

    {%- comment -%} SEO: Breadcrumbs Structured Data {%- endcomment -%}
    {% render 'schema-breadcrumbs' %}

    <!-- Scripts Principales -->
    <script src="{{ 'constants.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'pubsub.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
    
    {%- if settings.animations_reveal_on_scroll -%}
      <script src="{{ 'animations.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}
    
    {%- comment -%} Scripts del rediseño {%- endcomment -%}
    {%- if template.name == 'product' -%}
      <script src="{{ 'cross-sell.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}
    
    {%- comment -%} Purchase notifications - cargar solo en home y product {%- endcomment -%}
    {%- if template.name == 'index' or template.name == 'product' -%}
      <script src="{{ 'purchase-notification.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}
    
    {%- comment -%} Image loading enhancement - all pages {%- endcomment -%}
    <script src="{{ 'image-loading.js' | asset_url }}" defer="defer"></script>

    {{ content_for_header }}

    <!-- Estilos de Fuentes -->
    {%- liquid
      assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold'
      assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic'
      assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
    %}

    {% style %}
      {{ settings.type_body_font | font_face: font_display: 'swap' }}
      {{ body_font_bold | font_face: font_display: 'swap' }}
      {{ body_font_italic | font_face: font_display: 'swap' }}
      {{ body_font_bold_italic | font_face: font_display: 'swap' }}
      {{ settings.type_header_font | font_face: font_display: 'swap' }}

      {% assign scheme_classes = '' %}
{% for scheme in settings.color_schemes -%}
  {% assign scheme_classes = scheme_classes | append: ', .color-' | append: scheme.id %}
  {% if forloop.index == 1 -%}
    :root,
  {%- endif %}
  .color-{{ scheme.id }} {
    --color-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
  {% if scheme.settings.background_gradient != empty %}
    --gradient-background: {{ scheme.settings.background_gradient }};
  {% else %}
    --gradient-background: {{ scheme.settings.background }};
  {% endif %}

    --color-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
    
    {% comment %} Calculamos el contraste automáticamente {% endcomment %}
    {% assign luminance = scheme.settings.background.red | times: 0.299 | plus: scheme.settings.background.green | times: 0.587 | plus: scheme.settings.background.blue | times: 0.114 %}
    {% if luminance > 186 %}
      --color-background-contrast: 0,0,0;
    {% else %}
      --color-background-contrast: 255,255,255;
    {% endif %}
    
    --color-shadow: {{ scheme.settings.shadow.red }},{{ scheme.settings.shadow.green }},{{ scheme.settings.shadow.blue }};
    --color-button: {{ scheme.settings.button.red }},{{ scheme.settings.button.green }},{{ scheme.settings.button.blue }};
    --color-button-text: {{ scheme.settings.button_label.red }},{{ scheme.settings.button_label.green }},{{ scheme.settings.button_label.blue }};
    --color-secondary-button: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
    --color-secondary-button-text: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
    --color-link: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
    --color-badge-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
    --color-badge-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
    --color-badge-border: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
    --payment-terms-background-color: rgb({{ scheme.settings.background.rgb }});
  }
{% endfor %}


      {{ scheme_classes | prepend: 'body' }} {
        color: rgba(var(--color-foreground), 0.75);
        background-color: rgb(var(--color-background));
      }

      :root {
        --font-body-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
        --font-body-style: {{ settings.type_body_font.style }};
        --font-body-weight: {{ settings.type_body_font.weight }};
        --font-body-weight-bold: {{ settings.type_body_font.weight | plus: 300 | at_most: 1000 }};

        --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
        --font-heading-style: {{ settings.type_header_font.style }};
        --font-heading-weight: {{ settings.type_header_font.weight }};

        --font-body-scale: {{ settings.body_scale | divided_by: 100.0 }};
        --font-heading-scale: {{ settings.heading_scale | times: 1.0 | divided_by: settings.body_scale }};

        --media-padding: {{ settings.media_padding }}px;
        --media-border-opacity: {{ settings.media_border_opacity | divided_by: 100.0 }};
        --media-border-width: {{ settings.media_border_thickness }}px;
        --media-radius: {{ settings.media_radius }}px;
        --media-shadow-opacity: {{ settings.media_shadow_opacity | divided_by: 100.0 }};
        --media-shadow-horizontal-offset: {{ settings.media_shadow_horizontal_offset }}px;
        --media-shadow-vertical-offset: {{ settings.media_shadow_vertical_offset }}px;
        --media-shadow-blur-radius: {{ settings.media_shadow_blur }}px;
        --media-shadow-visible: {% if settings.media_shadow_opacity > 0 %}1{% else %}0{% endif %};

        --page-width: {{ settings.page_width | divided_by: 10 }}rem;
        --page-width-margin: {% if settings.page_width == '1600' %}2{% else %}0{% endif %}rem;

        --product-card-image-padding: {{ settings.card_image_padding | divided_by: 10.0 }}rem;
        --product-card-corner-radius: {{ settings.card_corner_radius | divided_by: 10.0 }}rem;
        --product-card-text-alignment: {{ settings.card_text_alignment }};
        --product-card-border-width: {{ settings.card_border_thickness | divided_by: 10.0 }}rem;
        --product-card-border-opacity: {{ settings.card_border_opacity | divided_by: 100.0 }};
        --product-card-shadow-opacity: {{ settings.card_shadow_opacity | divided_by: 100.0 }};
        --product-card-shadow-visible: {% if settings.card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --product-card-shadow-horizontal-offset: {{ settings.card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-vertical-offset: {{ settings.card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-blur-radius: {{ settings.card_shadow_blur | divided_by: 10.0 }}rem;

        --collection-card-image-padding: {{ settings.collection_card_image_padding | divided_by: 10.0 }}rem;
        --collection-card-corner-radius: {{ settings.collection_card_corner_radius | divided_by: 10.0 }}rem;
        --collection-card-text-alignment: {{ settings.collection_card_text_alignment }};
        --collection-card-border-width: {{ settings.collection_card_border_thickness | divided_by: 10.0 }}rem;
        --collection-card-border-opacity: {{ settings.collection_card_border_opacity | divided_by: 100.0 }};
        --collection-card-shadow-opacity: {{ settings.collection_card_shadow_opacity | divided_by: 100.0 }};
        --collection-card-shadow-visible: {% if settings.collection_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --collection-card-shadow-horizontal-offset: {{ settings.collection_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-vertical-offset: {{ settings.collection_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-blur-radius: {{ settings.collection_card_shadow_blur | divided_by: 10.0 }}rem;

        --blog-card-image-padding: {{ settings.blog_card_image_padding | divided_by: 10.0 }}rem;
        --blog-card-corner-radius: {{ settings.blog_card_corner_radius | divided_by: 10.0 }}rem;
        --blog-card-text-alignment: {{ settings.blog_card_text_alignment }};
        --blog-card-border-width: {{ settings.blog_card_border_thickness | divided_by: 10.0 }}rem;
        --blog-card-border-opacity: {{ settings.blog_card_border_opacity | divided_by: 100.0 }};
        --blog-card-shadow-opacity: {{ settings.blog_card_shadow_opacity | divided_by: 100.0 }};
        --blog-card-shadow-visible: {% if settings.blog_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --blog-card-shadow-horizontal-offset: {{ settings.blog_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-vertical-offset: {{ settings.blog_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-blur-radius: {{ settings.blog_card_shadow_blur | divided_by: 10.0 }}rem;

        --badge-corner-radius: {{ settings.badge_corner_radius | divided_by: 10.0 }}rem;

        --popup-border-width: {{ settings.popup_border_thickness }}px;
        --popup-border-opacity: {{ settings.popup_border_opacity | divided_by: 100.0 }};
        --popup-corner-radius: {{ settings.popup_corner_radius }}px;
        --popup-shadow-opacity: {{ settings.popup_shadow_opacity | divided_by: 100.0 }};
        --popup-shadow-horizontal-offset: {{ settings.popup_shadow_horizontal_offset }}px;
        --popup-shadow-vertical-offset: {{ settings.popup_shadow_vertical_offset }}px;
        --popup-shadow-blur-radius: {{ settings.popup_shadow_blur }}px;

        --drawer-border-width: {{ settings.drawer_border_thickness }}px;
        --drawer-border-opacity: {{ settings.drawer_border_opacity | divided_by: 100.0 }};
        --drawer-shadow-opacity: {{ settings.drawer_shadow_opacity | divided_by: 100.0 }};
        --drawer-shadow-horizontal-offset: {{ settings.drawer_shadow_horizontal_offset }}px;
        --drawer-shadow-vertical-offset: {{ settings.drawer_shadow_vertical_offset }}px;
        --drawer-shadow-blur-radius: {{ settings.drawer_shadow_blur }}px;

        --spacing-sections-desktop: {{ settings.spacing_sections }}px;
        --spacing-sections-mobile: {% if settings.spacing_sections < 24 %}{{ settings.spacing_sections }}{% else %}{{ settings.spacing_sections | times: 0.7 | round | at_least: 20 }}{% endif %}px;

        --grid-desktop-vertical-spacing: {{ settings.spacing_grid_vertical }}px;
        --grid-desktop-horizontal-spacing: {{ settings.spacing_grid_horizontal }}px;
        --grid-mobile-vertical-spacing: {{ settings.spacing_grid_vertical | divided_by: 2 }}px;
        --grid-mobile-horizontal-spacing: {{ settings.spacing_grid_horizontal | divided_by: 2 }}px;

        --text-boxes-border-opacity: {{ settings.text_boxes_border_opacity | divided_by: 100.0 }};
        --text-boxes-border-width: {{ settings.text_boxes_border_thickness }}px;
        --text-boxes-radius: {{ settings.text_boxes_radius }}px;
        --text-boxes-shadow-opacity: {{ settings.text_boxes_shadow_opacity | divided_by: 100.0 }};
        --text-boxes-shadow-visible: {% if settings.text_boxes_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --text-boxes-shadow-horizontal-offset: {{ settings.text_boxes_shadow_horizontal_offset }}px;
        --text-boxes-shadow-vertical-offset: {{ settings.text_boxes_shadow_vertical_offset }}px;
        --text-boxes-shadow-blur-radius: {{ settings.text_boxes_shadow_blur }}px;

        --buttons-radius: {{ settings.buttons_radius }}px;
        --buttons-radius-outset: {% if settings.buttons_radius > 0 %}{{ settings.buttons_radius | plus: settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-width: {% if settings.buttons_border_opacity > 0 %}{{ settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-opacity: {{ settings.buttons_border_opacity | divided_by: 100.0 }};
        --buttons-shadow-opacity: {{ settings.buttons_shadow_opacity | divided_by: 100.0 }};
        --buttons-shadow-visible: {% if settings.buttons_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --buttons-shadow-horizontal-offset: {{ settings.buttons_shadow_horizontal_offset }}px;
        --buttons-shadow-vertical-offset: {{ settings.buttons_shadow_vertical_offset }}px;
        --buttons-shadow-blur-radius: {{ settings.buttons_shadow_blur }}px;
        --buttons-border-offset: {% if settings.buttons_radius > 0 or settings.buttons_shadow_opacity > 0 %}0.3{% else %}0{% endif %}px;

        --inputs-radius: {{ settings.inputs_radius }}px;
        --inputs-border-width: {{ settings.inputs_border_thickness }}px;
        --inputs-border-opacity: {{ settings.inputs_border_opacity | divided_by: 100.0 }};
        --inputs-shadow-opacity: {{ settings.inputs_shadow_opacity | divided_by: 100.0 }};
        --inputs-shadow-horizontal-offset: {{ settings.inputs_shadow_horizontal_offset }}px;
        --inputs-margin-offset: {% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_opacity > 0 %}{{ settings.inputs_shadow_vertical_offset | abs }}{% else %}0{% endif %}px;
        --inputs-shadow-vertical-offset: {{ settings.inputs_shadow_vertical_offset }}px;
        --inputs-shadow-blur-radius: {{ settings.inputs_shadow_blur }}px;
        --inputs-radius-outset: {% if settings.inputs_radius > 0 %}{{ settings.inputs_radius | plus: settings.inputs_border_thickness }}{% else %}0{% endif %}px;

        --variant-pills-radius: {{ settings.variant_pills_radius }}px;
        --variant-pills-border-width: {{ settings.variant_pills_border_thickness }}px;
        --variant-pills-border-opacity: {{ settings.variant_pills_border_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-opacity: {{ settings.variant_pills_shadow_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-horizontal-offset: {{ settings.variant_pills_shadow_horizontal_offset }}px;
        --variant-pills-shadow-vertical-offset: {{ settings.variant_pills_shadow_vertical_offset }}px;
        --variant-pills-shadow-blur-radius: {{ settings.variant_pills_shadow_blur }}px;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      html {
        box-sizing: border-box;
        font-size: calc(var(--font-body-scale) * 62.5%);
        height: 100%;
      }

      body {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        grid-template-columns: 100%;
        min-height: 100%;
        margin: 0;
        font-size: 1.5rem;
        line-height: calc(1 + 0.8 / var(--font-body-scale));
        font-family: var(--font-body-family);
        font-style: var(--font-body-style);
        font-weight: var(--font-body-weight);
      }

    {% endstyle %}

    <!-- Critical CSS inline (essential above-the-fold styles) -->
<style>
  /* Critical CSS - Above the fold styles to prevent FOUC and layout shifts
   * Optimized for LCP (Largest Contentful Paint) and CLS (Cumulative Layout Shift)
   * 
   * Uses CSS custom properties that will be overridden when the full theme CSS 
   * loads asynchronously (base.css, techauraz-master.css, etc.).
   * This provides immediate rendering while allowing full theme customization.
   */
  
  :root {
    /* Critical theme colors - overridden by full theme CSS when it loads */
    --critical-bg: #020617;
    --critical-header-bg: rgba(15, 23, 42, 0.96);
    --critical-text: #e2e8f0;
    --critical-media-bg: #1a1a2e;
  }
  
  /* Base styles */
  * { box-sizing: border-box; }
  
  body { 
    margin: 0; 
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
    background: var(--critical-bg);
    color: var(--critical-text); 
    line-height: 1.6;
    font-size: 16px;
  }
  
  /* Header critical styles - Prevent header layout shift */
  .header-wrapper, 
  .section-header { 
    background: var(--critical-header-bg); 
    position: sticky; 
    top: 0; 
    z-index: 999;
    contain: layout style;
    will-change: transform;
  }
  
  .header { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 0.5rem 1rem;
    min-height: 60px;
  }
  
  .header__heading-logo {
    flex: 0 0 auto;
  }
  
  /* Hero/Banner critical styles - LCP optimization */
  .banner,
  .slideshow { 
    position: relative; 
    display: block;
    contain: layout;
  }
  
  .banner__media,
  .slideshow__media { 
    position: relative; 
    overflow: hidden;
    background: var(--critical-media-bg);
  }
  
  .banner__media img,
  .slideshow__media img { 
    width: 100%; 
    height: auto; 
    display: block;
    object-fit: cover;
  }
  
  /* Prevent CLS for images */
  img { 
    max-width: 100%; 
    height: auto;
    vertical-align: middle;
  }
  
  /* Basic grid layout - Prevent layout shift */
  .page-width { 
    max-width: 1440px; 
    margin: 0 auto; 
    padding: 0 1.5rem;
  }
  
  /* Product grid skeleton */
  .grid {
    display: grid;
    gap: 1rem;
  }
  
  @media (min-width: 750px) {
    .grid--2-col-tablet { grid-template-columns: repeat(2, 1fr); }
    .grid--3-col-tablet { grid-template-columns: repeat(3, 1fr); }
    .grid--4-col-tablet { grid-template-columns: repeat(4, 1fr); }
  }
  
  /* Utility classes to prevent CLS */
  .visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    margin: -1px !important;
    padding: 0 !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
  
  /* Loading states - Hide until CSS loads to prevent FOUC */
  .loading-spinner,
  .loading-overlay { 
    opacity: 0;
    pointer-events: none;
  }
  
  /* Buttons - Basic styles to prevent FOUC */
  button,
  .button {
    cursor: pointer;
    font-family: inherit;
    font-size: inherit;
  }
  
  /* Links */
  a {
    color: inherit;
    text-decoration: none;
  }
</style>

<!-- CSS completo con preload + async -->
<link rel="preload" href="{{ 'base.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'base.css' | asset_url }}"></noscript>

<!-- Base CSS Overrides - Clean up redundant and problematic rules from minified base.css -->
<link rel="preload" href="{{ 'base-overrides.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'base-overrides.css' | asset_url }}"></noscript>

{%- comment -%} Load animations CSS only if enabled {%- endcomment -%}
{%- if settings.animations_reveal_on_scroll -%}
  <link rel="preload" href="{{ 'animations.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ 'animations.css' | asset_url }}"></noscript>
{%- endif -%}

{%- comment -%} Load cross-sell CSS only on product pages {%- endcomment -%}
{%- if template.name == 'product' -%}
  <link rel="preload" href="{{ 'cross-sell.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ 'cross-sell.css' | asset_url }}"></noscript>
{%- endif -%}

<!-- TechAura Master CSS - Consolidated theme fixes and enhancements -->
<link rel="preload" href="{{ 'techauraz-master.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'techauraz-master.css' | asset_url }}"></noscript>

<!-- Theme Refactor 2024 - Header and image rendering fixes -->
<link rel="preload" href="{{ 'theme-refactor-2024.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'theme-refactor-2024.css' | asset_url }}"></noscript>

{%- comment -%} Load product-specific CSS only on product pages {%- endcomment -%}
{%- if template.name == 'product' -%}
  <!-- Product Page Conversion Fixes - Critical conversion elements visibility and layout -->
  <link rel="preload" href="{{ 'product-page-conversion-fixes.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ 'product-page-conversion-fixes.css' | asset_url }}"></noscript>
  
  <!-- PDP Scroll-Trigger Fixes - Fix visibility issues with scroll animations -->
  <link rel="preload" href="{{ 'pdp-scroll-trigger-fixes.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ 'pdp-scroll-trigger-fixes.css' | asset_url }}"></noscript>
{%- endif -%}

<!-- UI/UX Fixes - Header overflow, price strikethrough, related products, and theme color fixes -->
<link rel="preload" href="{{ 'ui-ux-fixes.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'ui-ux-fixes.css' | asset_url }}"></noscript>

<!-- UX/CRO Fixes - Hero carousel, titles, mobile scroll, product cards, cookie banner -->
<link rel="preload" href="{{ 'ux-cro-fixes.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="{{ 'ux-cro-fixes.css' | asset_url }}"></noscript>

<!-- 
  ============================================================================
  CSS LOADING ORDER - CRITICAL FOR LAYOUT FIXES
  ============================================================================
  1. base.css (preload with fallback) - Core Dawn theme styles (minified)
     → Contains fundamental theme styles but has 524 !important conflicts
     
  2. base-overrides.css (preload with fallback) - Override redundant/problematic base.css rules
     → MUST load after base.css to fix positioning and grid conflicts
     
  3. animations.css (preload with fallback, conditional) - Animation utilities
     → Independent animation system, loaded only if animations enabled
     
  4. cross-sell.css (product pages only) - Cross-sell component styles
     → Product-specific, conditionally loaded on product pages
     
  5. techauraz-master.css (preload with fallback) - Unified TechAura theme styles
     → Brand-specific styles, builds on corrected base
     
  6. theme-refactor-2024.css (preload with fallback) - 2024 header and image fixes
     → Header positioning and image rendering fixes
     
  7. product-page-conversion-fixes.css (product pages only) - Product page conversion elements
     → Critical conversion elements visibility, layout, and CRO optimizations
     
  8. pdp-scroll-trigger-fixes.css (product pages only) - Scroll-trigger animation visibility fixes
     → Ensures content is visible by default, fixes opacity:.01 issue, provides noscript fallback
     → CRITICAL: Must load after animations.css to override problematic scroll-trigger rules
     
  9. ui-ux-fixes.css (preload with fallback) - UI/UX improvements
     → Header overflow, price strikethrough, related products, theme color fixes
     
  10. ux-cro-fixes.css (preload with fallback) - UX/CRO optimizations
     → Hero carousel, titles, mobile scroll, product cards, cookie banner
     → MUST load last to ensure all refinements override previous styles
  
  Additional section-specific CSS:
  - product-conversion.css - Loaded by conversion sections (benefits, testimonials, etc.)
  - product-layout-fixes-2024.css - Loaded by product card and related products sections
  
  ⚠️ DO NOT change this order without testing:
  - Product cards on collection pages
  - Product detail page image gallery
  - Related products section
  - Homepage featured collections
  
  techauraz-master.css contains:
  - Card image aspect ratios (4:5 for cards, auto for PDP)
  - Object-fit rules (cover for cards, contain for PDP)
  - Grid layout on mobile/tablet/desktop
  - Premium visual enhancements (gradients, shadows, hover effects)
  - Product form styling
  
  theme-refactor-2024.css contains:
  - Header icon sizing and sticky behavior
  - Image rendering fixes
  - Responsive improvements

    <!-- Preload de Fuentes -->
    {%- unless settings.type_body_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_body_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}
    {%- unless settings.type_header_font.system? -%}
      <link rel="preload" as="font" href="{{ settings.type_header_font | font_url }}" type="font/woff2" crossorigin>
    {%- endunless -%}

    <!-- Componentes Adicionales -->
    {%- if localization.available_countries.size > 1 or localization.available_languages.size > 1 -%}
      {{ 'component-localization-form.css' | asset_url | stylesheet_tag: preload: true }}
      <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if settings.predictive_search_enabled -%}
      <link
        rel="stylesheet"
        href="{{ 'component-predictive-search.css' | asset_url }}"
        media="print"
        onload="this.media='all'"
      >
    {%- endif -%}

    <!-- Script de Inicialización -->
    <script defer="defer">
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
      if (Shopify.designMode) {
        document.documentElement.classList.add('shopify-design-mode');
      }
    </script>

    <!-- Estilos Personalizados - Minimal Critical CSS -->
    <style>
    /* Critical CSS loaded inline, rest moved to techauraz-master.css */
    </style>

    <!-- Google Webmaster Tools Site Verification -->
    <meta name="google-site-verification" content="fj7UYrB5GV0ojQhLbYR8XqrgfSDiY8Bcqz-npt1MvQo" />
    {% comment %} Soporte WebP automático {% endcomment %}
   <script defer="defer">
     document.addEventListener('DOMContentLoaded', function() {
       if(window.HTMLCanvasElement) {
         var img = new Image();
         img.onload = img.onerror = function() {
           document.documentElement.className += (img.height == 1) ? ' webp' : ' no-webp';
         };
         img.src = 'data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==';
       }
     });
   </script>
   <!-- GOOGLE TAG MANAGER - OPTIMIZED -->
<script>
(function(w,d,s,l,i){
  // Performance optimization constants
  var GTM_DELAY = 5000;           // Delay before auto-loading GTM (5s)
  var GTM_IDLE_TIMEOUT = 7000;    // Timeout for idle callback (7s)
  var GTM_INTERACTION_DELAY = 100; // Short delay after interaction to avoid blocking (100ms - GTM is lighter)
  
  // Load GTM only after user interaction or idle time
  function loadGTM() {
    if (w.gtmLoaded) return;
    w.gtmLoaded = true;
    
    w[l]=w[l]||[];
    w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;
    j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
    f.parentNode.insertBefore(j,f);
  }
  
  // Load after delay or on first scroll/click/touch
  var timer = setTimeout(loadGTM, GTM_DELAY);
  
  ['scroll', 'mousemove', 'touchstart', 'click'].forEach(function(e) {
    window.addEventListener(e, function() {
      clearTimeout(timer);
      // Delay slightly to not block interaction
      setTimeout(loadGTM, GTM_INTERACTION_DELAY);
    }, { once: true, passive: true });
  });
  
  // Load on idle if supported
  if ('requestIdleCallback' in window) {
    requestIdleCallback(function() {
      clearTimeout(timer);
      loadGTM();
    }, { timeout: GTM_IDLE_TIMEOUT });
  }
})(window,document,'script','dataLayer','GTM-PB6TD2ZD');
</script>
<!-- FACEBOOK PIXEL - OPTIMIZED -->
<script>
(function() {
  // Performance optimization constants
  var FB_DELAY = 6000;            // Delay before auto-loading FB Pixel (6s)
  var FB_IDLE_TIMEOUT = 8000;     // Timeout for idle callback (8s)
  var FB_INTERACTION_DELAY = 200; // Longer delay after interaction (200ms - FB Pixel is heavier than GTM)
  
  var fbLoaded = false;
  
  function loadFBPixel() {
    if (fbLoaded) return;
    fbLoaded = true;
    
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}
    (window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
    
    fbq('init', '809161240853412');
    fbq('track', 'PageView');
  }
  
  // Load only after interaction or idle - later than GTM
  var timer = setTimeout(loadFBPixel, FB_DELAY);
  ['scroll', 'mousemove', 'touchstart', 'click'].forEach(function(e) {
    window.addEventListener(e, function() {
      clearTimeout(timer);
      // Delay to reduce impact on interaction
      setTimeout(loadFBPixel, FB_INTERACTION_DELAY);
    }, { once: true, passive: true });
  });
  
  // Load on idle if supported
  if ('requestIdleCallback' in window) {
    requestIdleCallback(function() {
      clearTimeout(timer);
      loadFBPixel();
    }, { timeout: FB_IDLE_TIMEOUT });
  }
})();
</script>
</head>

<body class="gradient{% if settings.animations_hover_elements != 'none' %} animate--hover-{{ settings.animations_hover_elements }}{% endif %}">

    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      {{ 'accessibility.skip_to_text' | t }}
    </a>

    {%- if settings.cart_type == 'drawer' -%}
      {%- render 'cart-drawer' -%}
    {%- endif -%}

    {% sections 'header-group' %}

    <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% sections 'footer-group' %}

    {%- comment -%} Cookie Notice - GDPR Compliance {%- endcomment -%}
    {% render 'cookie-notice' %}

    <ul hidden>
      <li id="a11y-refresh-page-message">{{ 'accessibility.refresh_page' | t }}</li>
      <li id="a11y-new-window-message">{{ 'accessibility.link_messages.new_window' | t }}</li>
    </ul>

    <script defer="defer">
      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}',
      };

      window.cartStrings = {
        error: `{{ 'sections.cart.cart_error' | t }}`,
        quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t: quantity: '[quantity]' }}`,
      };

      window.variantStrings = {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
        unavailable_with_option: `{{ 'products.product.value_unavailable' | t: option_value: '[value]' }}`,
      };

      window.quickOrderListStrings = {
        itemsAdded: `{{ 'sections.quick_order_list.items_added.other' | t: quantity: '[quantity]' }}`,
        itemAdded: `{{ 'sections.quick_order_list.items_added.one' | t: quantity: '[quantity]' }}`,
        itemsRemoved: `{{ 'sections.quick_order_list.items_removed.other' | t: quantity: '[quantity]' }}`,
        itemRemoved: `{{ 'sections.quick_order_list.items_removed.one' | t: quantity: '[quantity]' }}`,
        viewCart: `{{- 'sections.quick_order_list.view_cart' | t -}}`,
        each: `{{- 'sections.quick_order_list.each' | t: money: '[money]' }}`,
      };

      window.accessibilityStrings = {
        imageAvailable: `{{ 'products.product.media.image_available' | t: index: '[index]' }}`,
        shareSuccess: `{{ 'general.share.success_message' | t }}`,
        pauseSlideshow: `{{ 'sections.slideshow.pause_slideshow' | t }}`,
        playSlideshow: `{{ 'sections.slideshow.play_slideshow' | t }}`,
        recipientFormExpanded: `{{ 'recipient.form.expanded' | t }}`,
        recipientFormCollapsed: `{{ 'recipient.form.collapsed' | t }}`,
        countrySelectorSearchCount: `{{ 'localization.country_results_count' | t: count: '[count]' }}`,
      };

      // Remove button classes if element exists
      const agregarCar = document.querySelector('.product-form__submit[id*="ProductSubmitButton"]');
      if (agregarCar) {
        agregarCar.classList.remove("button--full-width", "button--secondary");
      }
    </script>

    {%- if settings.predictive_search_enabled -%}
      <script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}
    <script src="{{ 'custom-scripts.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'techauraz-enhancements.js' | asset_url }}" defer="defer"></script>
    <script defer="defer">
  (function(){
var header = document.querySelector('.section-header, .header-wrapper');
if(!header) return;
function isMobileLike(){ return window.matchMedia('(max-width: 989.98px)').matches; }

var lastY = window.scrollY || 0;
var ticking = false;

function onScroll(){
  if(!isMobileLike()){ 
    header.classList.remove('header--hide'); 
    header.classList.remove('header--show');
    lastY = window.scrollY || 0;
    ticking = false;
    return;
  }

  var y = window.scrollY || 0;
  var delta = y - lastY;

  var menuOpen = document.querySelector('.menu-drawer[open]') || document.querySelector('.header__submenu[open]') || document.querySelector('.predictive-search[open]');
  if(menuOpen){
    header.classList.remove('header--hide');
    header.classList.add('header--show');
    lastY = y; ticking = false; return;
  }

  if(delta < -4){
    header.classList.remove('header--hide');
    header.classList.add('header--show');
  }else if(delta > 4 && y > 100){
    header.classList.remove('header--show');
    header.classList.add('header--hide');
  }
  lastY = y;
  ticking = false;
}

function onResize(){
  if(!isMobileLike()){
    header.style.transform = '';
    header.classList.remove('header--hide');
    header.classList.remove('header--show');
  }else{
    header.classList.add('header--show');
  }
}

window.addEventListener('scroll', function(){
  if(!ticking){
    window.requestAnimationFrame(onScroll);
    ticking = true;
  }
}, {passive:true});

window.addEventListener('resize', onResize);
onResize();
})();

// Sticky header shrink on scroll
(function() {
  const headerWrapper = document.querySelector('.header-wrapper, .section-header');
  if (!headerWrapper) return;
  
  let lastScrollY = 0;
  let ticking = false;
  
  function updateHeaderOnScroll() {
    const scrollY = window.scrollY || window.pageYOffset;
    
    // Add 'scrolled' class when scrolled down more than 50px
    if (scrollY > 50) {
      headerWrapper.classList.add('scrolled');
    } else {
      headerWrapper.classList.remove('scrolled');
    }
    
    lastScrollY = scrollY;
    ticking = false;
  }
  
  function requestTick() {
    if (!ticking) {
      window.requestAnimationFrame(updateHeaderOnScroll);
      ticking = true;
    }
  }
  
  window.addEventListener('scroll', requestTick, { passive: true });
  updateHeaderOnScroll(); // Initial check
})();
</script>
<!-- BOTÓN WHATSAPP FLOTANTE -->
<style>
  .whatsapp-float {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
    animation: fadeInUp 0.6s ease-out;
  }

  .whatsapp-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
    border-radius: 50%;
    box-shadow: 0 8px 24px rgba(37, 211, 102, 0.4);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    text-decoration: none;
    position: relative;
  }

  .whatsapp-button svg {
    width: 32px;
    height: 32px;
    fill: white;
    transition: transform 0.3s ease;
  }

  .whatsapp-button:hover {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 12px 32px rgba(37, 211, 102, 0.6);
  }

  .whatsapp-button:hover svg {
    transform: scale(1.1);
  }

  .whatsapp-button::before {
    content: '';
    position: absolute;
    inset: -5px;
    border-radius: 50%;
    background: rgba(37, 211, 102, 0.4);
    animation: pulse 2s infinite;
    z-index: -1;
  }

  .whatsapp-tooltip {
    position: absolute;
    right: 70px;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    color: #1f2937;
    padding: 12px 18px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    white-space: nowrap;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    pointer-events: none;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .whatsapp-tooltip::after {
    content: '';
    position: absolute;
    right: -8px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 8px solid white;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
  }

  .whatsapp-float:hover .whatsapp-tooltip {
    opacity: 1;
    visibility: visible;
    right: 75px;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(1.15);
    }
  }

  @keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-5deg); }
    75% { transform: rotate(5deg); }
  }

  .whatsapp-button.shake {
    animation: shake 0.5s ease;
  }

  @media (max-width: 768px) {
    .whatsapp-float {
      bottom: 15px;
      right: 15px;
    }
    .whatsapp-button {
      width: 56px;
      height: 56px;
    }
    .whatsapp-button svg {
      width: 28px;
      height: 28px;
    }
    .whatsapp-tooltip {
      display: none;
    }
  }
</style>

<div class="whatsapp-float">
  <div class="whatsapp-tooltip">
    ¿Necesitas ayuda? ¡Escríbenos!
  </div>
  
  <a 
    href="https://wa.me/573008602789?text=Hola%2C%20me%20encuentro%20interesado%20en%20los%20productos." 
    class="whatsapp-button"
    target="_blank"
    rel="noopener noreferrer"
    aria-label="Contactar por WhatsApp"
  >
    <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
      <path d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-5.25 1.408 1.408-5.248-0.292-0.508c-1.207-2.100-1.843-4.479-1.843-6.957 0-7.51 6.11-13.617 13.617-13.617s13.617 6.107 13.617 13.617c0 7.508-6.108 13.467-13.68 13.467zM21.617 18.517c-0.375-0.188-2.217-1.092-2.558-1.217s-0.592-0.187-0.842 0.188-0.967 1.217-1.183 1.467-0.433 0.279-0.808 0.092-1.575-0.583-3-1.858c-1.108-0.992-1.858-2.217-2.075-2.592s-0.025-0.575 0.162-0.762c0.167-0.167 0.375-0.433 0.562-0.65s0.25-0.375 0.375-0.625 0.063-0.467-0.031-0.654-0.842-2.025-1.154-2.775c-0.308-0.733-0.617-0.625-0.842-0.625s-0.467-0.031-0.717-0.031-0.654 0.092-0.996 0.467-1.308 1.279-1.308 3.117 1.342 3.617 1.529 3.867 2.625 4.008 6.358 5.625c0.887 0.383 1.579 0.608 2.117 0.779 0.892 0.279 1.704 0.242 2.346 0.146 0.717-0.108 2.217-0.908 2.529-1.783s0.312-1.625 0.217-1.783-0.346-0.25-0.721-0.438z"/>
    </svg>
  </a>
</div>

<script>
  // WhatsApp button animations - load on idle to reduce main thread blocking
  if ('requestIdleCallback' in window) {
    requestIdleCallback(function() {
      initWhatsAppButton();
    }, { timeout: 3000 });
  } else {
    // Fallback for browsers without requestIdleCallback
    setTimeout(initWhatsAppButton, 2000);
  }
  
  function initWhatsAppButton() {
    const whatsappBtn = document.querySelector('.whatsapp-button');
    if (!whatsappBtn) return;
    
    // Initial shake after delay
    setTimeout(() => {
      whatsappBtn.classList.add('shake');
      setTimeout(() => whatsappBtn.classList.remove('shake'), 500);
    }, 1000);

    // Periodic shake
    setInterval(() => {
      whatsappBtn.classList.add('shake');
      setTimeout(() => whatsappBtn.classList.remove('shake'), 500);
    }, 15000);

    // Track clicks (only if gtag is loaded)
    whatsappBtn.addEventListener('click', function() {
      if (typeof gtag !== 'undefined') {
        gtag('event', 'click', {
          'event_category': 'WhatsApp',
          'event_label': 'Floating Button Click'
        });
      }
    });
  }
</script>
<script src="{{ 'tiny-img-link-preloader.js' | asset_url }}" defer></script>
<!-- TRACKING OPTIMIZADO - SOLO UNA VEZ -->
<script defer="defer">
  // Defer de scripts de terceros
  function loadScriptDefer(src, id) {
    if(document.getElementById(id)) return;
    var script = document.createElement('script');
    script.id = id;
    script.src = src;
    script.defer = true;
    document.body.appendChild(script);
  }
  
</script>
<!-- RENDERING OPTIMIZATION -->
<script>
  // Defer non-critical scripts using requestIdleCallback
  if ('requestIdleCallback' in window) {
    requestIdleCallback(function() {
      // Load third-party widgets in idle time
      // Here go widgets like Tidio, Klaviyo, etc. if needed
    }, { timeout: 5000 });
  } else {
    // Fallback: use setTimeout for older browsers
    window.addEventListener('load', function() {
      setTimeout(function() {
        // Here go widgets like Tidio, Klaviyo, etc.
      }, 3000);
    });
  }
  
  // Optimize scroll handlers - consolidate into one with debounce
  let scrollTicking = false;
  let lastScrollY = 0;
  
  function handleScroll() {
    lastScrollY = window.scrollY || window.pageYOffset;
    scrollTicking = false;
    // Any scroll logic here runs with requestAnimationFrame
  }
  
  window.addEventListener('scroll', function() {
    if (!scrollTicking) {
      window.requestAnimationFrame(handleScroll);
      scrollTicking = true;
    }
  }, { passive: true });
</script>
</body> </html>
