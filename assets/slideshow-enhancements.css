/*
 * Slideshow Enhancements - Slider Controls & CTAs
 * Purpose: Improve visibility and positioning of slideshow controls and call-to-action buttons
 * Scoped to: .template-index (home page) slideshow component
 * Updated: 2026-01-28 - Fixed image proportions, overlay alignment, unified CTA rendering
 */

/* =============================================================================
   SLIDESHOW IMAGE VISIBILITY & ASPECT RATIO FIXES
   Critical: Ensure all slides show images with correct proportions
   Mobile: 16:9 aspect ratio (56.25% padding-bottom)
   Desktop: Wider hero with max-height constraints
   ============================================================================= */

/* Tech hero wrapper hooks (scoped to home page) */
.template-index .tech-hero {
  position: relative;
  overflow: hidden;
  /* Creates new stacking context to ensure z-index within hero doesn't affect header */
  isolation: isolate;
}

/* Container for proper aspect ratio handling */
.template-index .tech-hero-slideshow {
  width: 100%;
  /* 
   * Mobile: Use aspect-ratio for proper proportions
   * Fallback: min-height provides consistent height for browsers without aspect-ratio support
   */
  aspect-ratio: 16 / 9;
  min-height: 280px;
  max-height: 400px;
}

@media screen and (min-width: 750px) {
  .template-index .tech-hero-slideshow {
    aspect-ratio: 21 / 9;
    min-height: 350px;
    max-height: 500px;
  }
}

@media screen and (min-width: 990px) {
  .template-index .tech-hero-slideshow {
    aspect-ratio: 21 / 8;
    min-height: 400px;
    max-height: 560px;
  }
}

.template-index .tech-hero__media {
  position: relative;
  width: 100%;
  height: 100%;
}

/* 
 * Overlay alignment - centered across all breakpoints
 * This flexbox centering applies to .tech-hero__overlay (scoped to homepage)
 * The .slideshow__text-wrapper styles below handle general banner content
 */
.template-index .tech-hero__overlay {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

.template-index .tech-hero__overlay .banner__box,
.template-index .tech-hero__overlay .slideshow-ctas {
  pointer-events: auto;
}

.template-index .tech-hero__media,
.template-index .tech-hero .slideshow__slide {
  min-height: 280px;
  height: 100%;
}

@media screen and (min-width: 750px) {
  .template-index .tech-hero__media,
  .template-index .tech-hero .slideshow__slide {
    min-height: 350px;
  }
}

@media screen and (min-width: 990px) {
  .template-index .tech-hero__media,
  .template-index .tech-hero .slideshow__slide {
    min-height: 502px;
    max-height: 560px;
  }
}

/* Image sizing - object-fit: cover with position center */
.template-index .tech-hero__media img,
.template-index .tech-hero__media .slideshow__media img,
.template-index .tech-hero__media .banner__media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center center;
}

/* =============================================================================
   SLIDESHOW CONTROLS - Single unified control set
   Position: Auto-rotate mode = arrows on sides (top), Manual mode = controls at bottom
   ============================================================================= */

/* Base control positioning for manual mode (dots/counter at bottom) */
.template-index slideshow-component .slideshow__controls {
  position: absolute;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  pointer-events: auto;
}

/* Auto-rotate mode: arrows positioned on sides */
.template-index slideshow-component .slideshow__controls--top {
  position: absolute;
  top: 50%;
  bottom: auto;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  pointer-events: none;
  justify-content: space-between;
  padding: 0 1.5rem;
}

/* Force placeholder SVGs in slideshow to be visible and fill container */
/* 
 * Note: !important on width/height/max properties is required to override base.css line 337-345
 * which forces all SVGs in .media containers to 1.6rem using !important.
 * This is a justified use since we're specifically overriding another !important rule.
 */
.slideshow__media.placeholder .placeholder-svg,
.banner__media.placeholder .placeholder-svg {
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  max-height: 100% !important;
  min-height: 280px; /* Mobile - matches hero */
  object-fit: cover;
  display: block;
  opacity: 1;
  visibility: visible;
}

@media screen and (min-width: 750px) {
  .slideshow__media.placeholder .placeholder-svg,
  .banner__media.placeholder .placeholder-svg {
    min-height: 350px; /* Tablet - matches hero */
  }
}

@media screen and (min-width: 990px) {
  .slideshow__media.placeholder .placeholder-svg,
  .banner__media.placeholder .placeholder-svg {
    min-height: 400px; /* Desktop - matches hero */
    max-height: 560px;
  }
}

/* Ensure slideshow media containers have consistent height with aspect ratio */
.slideshow__media,
.banner__media {
  min-height: 280px;
  max-height: 400px; /* Cap mobile height */
  width: 100%;
  position: relative;
  overflow: hidden;
  background: #f1f5f9; /* Light gray fallback background */
}

/* Tablet: Set height */
@media screen and (min-width: 750px) {
  .slideshow__media,
  .banner__media {
    min-height: 350px;
    max-height: 500px;
  }
}

/* Desktop: Set height with max to prevent excessive height */
@media screen and (min-width: 990px) {
  .slideshow__media,
  .banner__media {
    min-height: 400px;
    max-height: 560px;
  }
}

/* Ensure all images in slideshow are visible with proper object-fit */
.slideshow__media img,
.banner__media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center center;
  display: block;
  opacity: 1;
  visibility: visible;
}

/* Explicitly ensure lazy loading doesn't affect slideshow images */
.slideshow__media img[loading="lazy"],
.banner__media img[loading="lazy"] {
  opacity: 1;
}

/* Ensure slideshow slide containers maintain consistent height */
.slideshow__slide {
  min-height: 280px; /* Mobile */
  max-height: 400px; /* Cap mobile height to prevent excessive growth */
}

@media screen and (min-width: 750px) {
  .slideshow__slide {
    min-height: 350px; /* Tablet - matches hero ratio */
    max-height: 500px;
  }
}

@media screen and (min-width: 990px) {
  .slideshow__slide {
    min-height: 400px; /* Desktop - matches hero ratio */
    max-height: 560px;
  }
}

/* =============================================================================
   OVERLAY ALIGNMENT - Consistent text/button centering across breakpoints
   ============================================================================= */

/* =============================================================================
   OVERLAY ALIGNMENT - Consistent text/button centering across breakpoints
   Note: These selectors target general slideshow/banner content (not .tech-hero specific)
   Parent containers have explicit heights set via .slideshow__slide and .banner__media
   ============================================================================= */

/* Overlay styling - text content positioning for better centering */
/* This ensures text content stays above the overlay - z-index layering */
.slideshow__text-wrapper,
.banner__content {
  position: absolute;
  inset: 0;
  z-index: 3; /* Above overlay (z-index: 2) */
  pointer-events: none; /* Allow clicks to pass through wrapper */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  /* Contain content within boundaries - prevents overlap with adjacent sections */
  overflow: hidden;
}

/* Mobile-specific overlay alignment */
@media screen and (max-width: 749px) {
  .slideshow__text-wrapper,
  .banner__content {
    padding: 0.75rem;
  }
}

/* Re-enable pointer events for interactive elements */
.slideshow__text-wrapper .banner__box,
.banner__content .banner__box {
  pointer-events: auto;
  /* Enhanced glassmorphism effect - premium depth and elegance */
  background: rgba(15, 23, 42, 0.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  padding: 2rem 2.5rem;
  max-width: min(90%, 600px);
  /* Ensure consistent centering of content within box */
  text-align: center;
}

@media screen and (min-width: 750px) {
  .slideshow__text-wrapper .banner__box,
  .banner__content .banner__box {
    padding: 3rem 3.5rem;
  }
}

/* =============================================================================
   SLIDESHOW HEADING - Premium golden gradient typography
   ============================================================================= */

/* Hero heading with golden gradient for premium impact */
.slideshow__text-wrapper .banner__heading,
.banner__content .banner__heading,
.template-index slideshow-component .banner__heading {
  font-size: clamp(2rem, 5vw, 3.5rem);
  font-weight: 800;
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.1;
  margin-bottom: 1rem;
  /* Fallback for browsers without background-clip support */
  color: #fbbf24;
}

/* Slideshow text/subheading styling */
.slideshow__text-wrapper .banner__text,
.banner__content .banner__text,
.template-index slideshow-component .banner__text {
  color: rgba(255, 255, 255, 0.85);
  font-size: 1.125rem;
  line-height: 1.6;
  max-width: 500px;
  margin-left: auto;
  margin-right: auto;
}

/* Ensure overlay is positioned correctly with subtle gradient - not a "patch" look */
/* Note: Uses gradient overlay for premium appearance instead of solid block */
.slideshow__media::after,
.banner__media::after {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  /* Gradient overlay: subtle at top, stronger at bottom for text readability */
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.15) 0%,
    rgba(0, 0, 0, 0.25) 40%,
    rgba(0, 0, 0, 0.45) 100%
  );
  content: '';
  z-index: 1; /* Above image (z-index: 0) */
  pointer-events: none; /* Don't block clicks */
}

/* Ensure the image stays at base z-index */
.slideshow__media img,
.banner__media img {
  position: relative;
  z-index: 0;
}

/* =============================================================================
   SLIDESHOW CONTROLS - Desktop & Mobile Positioning
   Unified control styling - removed duplicate class references
   
   Button size rationale:
   - 52x52px exceeds WCAG 2.1 minimum touch target (44x44px) by ~18%
   - Provides comfortable touch area without being visually dominant
   - Consistent with common UI patterns for navigation controls
   ============================================================================= */

/* Desktop: Arrow buttons centered vertically on hero (auto-rotate mode) */
@media screen and (min-width: 750px) {
  .template-index slideshow-component .slideshow__controls--top .slider-button {
    position: relative;
    z-index: var(--ta-z-slideshow-controls, 20); /* Local stacking within slideshow */
    /* Enhanced glassmorphism effect for navigation buttons */
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    /* 48px exceeds WCAG 2.1 minimum touch target (44px) */
    width: 48px;
    height: 48px;
    min-width: 48px;
    min-height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    pointer-events: auto;
  }

  .template-index slideshow-component .slideshow__controls--top .slider-button:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
  }

  .template-index slideshow-component .slideshow__controls--top .slider-button:focus {
    outline: 3px solid rgba(255, 255, 255, 0.5);
    outline-offset: 3px;
  }

  .template-index slideshow-component .slideshow__controls--top .slider-button:focus-visible {
    outline: 3px solid rgba(255, 255, 255, 0.7);
    outline-offset: 3px;
    background: rgba(255, 255, 255, 0.25);
  }

  /* Ensure SVG icons in slider buttons are white */
  .template-index slideshow-component .slideshow__controls--top .slider-button svg {
    color: white;
    fill: currentColor;
  }
}

/* 
 * Mobile: Hide arrows for auto-rotate, show dots below hero for manual mode
 * Arrows are hidden on mobile for better UX - users swipe to navigate slides
 */
@media screen and (max-width: 749px) {
  /* Hide arrow buttons on mobile for auto-rotate mode - users swipe instead */
  .template-index slideshow-component .slideshow__controls--top .slider-button {
    display: none;
  }

  /* Controls positioning for mobile - spacing ensures no overlap with next section */
  .template-index slideshow-component .slideshow__controls {
    position: relative;
    bottom: auto;
    left: auto;
    transform: none;
    margin: 1rem auto 0;
    /* Padding provides separation from next section content */
    padding: 0.75rem 0 1.5rem;
    justify-content: center;
    gap: 0.5rem;
  }

  /* Dots container */
  .template-index slideshow-component .slider-counter {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    align-items: center;
  }

  .template-index slideshow-component .slideshow__control-wrapper {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    align-items: center;
  }
}

/* Desktop: Position controls at bottom of hero */
@media screen and (min-width: 750px) {
  .template-index slideshow-component .slideshow__controls:not(.slideshow__controls--top) {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    z-index: var(--ta-z-slideshow-controls, 20); /* Local stacking within slideshow */
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: center;
  }

  /* When controls are at top (with autoplay), position arrows on sides */
  .template-index slideshow-component .slideshow__controls--top {
    position: absolute;
    top: 50%;
    bottom: auto;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    pointer-events: none;
    justify-content: space-between;
    padding: 0 1.5rem;
  }
}

/* =============================================================================
   SLIDER DOTS - Improved Visibility & Touch Targets
   ============================================================================= */

.template-index slideshow-component .slider-counter__link--dots {
  padding: 0.7rem;
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 50%;
  transition: background 0.3s ease;
}

.template-index slideshow-component .slider-counter__link--dots:hover {
  background: rgba(255, 255, 255, 0.1);
}

.template-index slideshow-component .slider-counter__link--dots:focus {
  outline: 2px solid rgba(37, 99, 235, 0.8);
  outline-offset: 2px;
}

.template-index slideshow-component .slider-counter__link--dots:focus-visible {
  outline: 2px solid rgba(37, 99, 235, 0.8);
  outline-offset: 2px;
}

.template-index slideshow-component .slider-counter__link--dots .dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: rgba(226, 232, 240, 0.5);
  border: 2px solid rgba(226, 232, 240, 0.7);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.template-index slideshow-component .slider-counter__link--active.slider-counter__link--dots .dot {
  background: #2563eb;
  border-color: #2563eb;
  width: 14px;
  height: 14px;
  box-shadow: 0 0 8px rgba(37, 99, 235, 0.5);
}

.template-index slideshow-component .slider-counter__link--dots:hover .dot {
  background: rgba(37, 99, 235, 0.7);
  border-color: rgba(37, 99, 235, 0.9);
  transform: scale(1.15);
}

/* Mobile specific dot styling */
@media screen and (max-width: 749px) {
  .template-index slideshow-component .slider-counter__link--dots {
    padding: 0.6rem;
    min-width: 48px;
    min-height: 48px;
  }

  .template-index slideshow-component .slider-counter__link--dots .dot {
    width: 11px;
    height: 11px;
  }

  .template-index slideshow-component .slider-counter__link--active.slider-counter__link--dots .dot {
    width: 13px;
    height: 13px;
  }
}

/* =============================================================================
   SLIDESHOW CTAs - Canonical CTA Rendering (Single Source of Truth)
   Note: CTAs are rendered ONLY in slideshow.liquid via .banner__buttons.slideshow-ctas
   This is the authoritative styling - other files should not override these styles.
   ============================================================================= */

/* CTA Container - targets the combined class selector for specificity */
.template-index slideshow-component .banner__buttons.slideshow-ctas {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
  align-items: center;
  margin-top: 1.5rem;
  position: relative;
  z-index: 10; /* Ensure CTAs are above overlay */
  pointer-events: auto; /* Ensure clickability */
}

/* Individual CTA Button */
.template-index slideshow-component .slideshow-cta {
  min-height: 48px; /* Exceeds 44px requirement for better touch targets */
  padding: 1rem 2rem;
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  letter-spacing: 0.025em;
  line-height: 1.5;
  text-decoration: none;
  border-radius: 0.75rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  pointer-events: auto; /* Ensure clickability */
}

/* Primary CTA - "VER CAT√ÅLOGO" enhanced blue button */
.template-index slideshow-component .slideshow-cta.button--primary {
  background: #3b82f6;
  color: #ffffff;
  border: none;
  box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.4);
}

.template-index slideshow-component .slideshow-cta.button--primary:hover {
  background: #2563eb;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px 0 rgba(59, 130, 246, 0.5);
}

.template-index slideshow-component .slideshow-cta.button--primary:focus {
  outline: 3px solid rgba(59, 130, 246, 0.5);
  outline-offset: 3px;
}

.template-index slideshow-component .slideshow-cta.button--primary:focus-visible {
  outline: 3px solid rgba(59, 130, 246, 0.7);
  outline-offset: 3px;
}

/* Secondary CTA - "CONTACTAR" transparent with border */
.template-index slideshow-component .slideshow-cta.button--secondary {
  background: transparent;
  color: #ffffff;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.template-index slideshow-component .slideshow-cta.button--secondary:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-2px);
}

.template-index slideshow-component .slideshow-cta.button--secondary:focus {
  outline: 3px solid rgba(255, 255, 255, 0.5);
  outline-offset: 3px;
}

.template-index slideshow-component .slideshow-cta.button--secondary:focus-visible {
  outline: 3px solid rgba(255, 255, 255, 0.7);
  outline-offset: 3px;
}

/* Disabled state */
.template-index slideshow-component .slideshow-cta[aria-disabled="true"] {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* Mobile: Full-width stacked buttons with 44px+ min height */
@media screen and (max-width: 749px) {
  .template-index slideshow-component .slideshow-ctas {
    flex-direction: column;
    gap: 0.75rem;
    width: 100%;
    max-width: 100%;
  }

  .template-index slideshow-component .slideshow-cta {
    width: 100%;
    max-width: 100%;
    min-height: 52px; /* Exceeds 44px requirement */
    padding: 16px 24px;
  }
}

/* Desktop: Side-by-side buttons */
@media screen and (min-width: 750px) {
  .template-index slideshow-component .slideshow-ctas {
    flex-direction: row;
    gap: 1.25rem;
  }

  .template-index slideshow-component .slideshow-cta {
    min-width: 180px;
  }
}

/* =============================================================================
   PREVENT CONTROL OVERLAP - Ensure controls stay within slideshow bounds
   ============================================================================= */

/* Container for slideshow to prevent overflow and ensure proper positioning */
.template-index slideshow-component {
  position: relative;
  margin-bottom: 0;
  padding-bottom: 0;
}

/* Ensure slideshow has proper positioning context for absolute controls */
/* Arrow positioning: lines 95-142, Dot positioning: lines 180-212 */
.template-index slideshow-component .slideshow {
  position: relative; /* Positioning context for arrows and dots */
  margin-bottom: 0;
  padding-bottom: 4rem; /* Space for dots */
}

@media screen and (max-width: 749px) {
  .template-index slideshow-component .slideshow {
    padding-bottom: 2rem;
  }

  /* Add extra spacing after slideshow on mobile to prevent overlap */
  .template-index slideshow-component + * {
    margin-top: 2rem;
  }
}

/* Adjust slideshow section spacing - fallback for browsers without :has() support */
.template-index .section slideshow-component {
  display: block;
}

@supports selector(:has(*)) {
  .template-index .section:has(slideshow-component) {
    padding-bottom: 2rem;
  }
}

/* =============================================================================
   ACCESSIBILITY IMPROVEMENTS
   ============================================================================= */

/* Ensure all interactive elements are keyboard accessible */
.template-index slideshow-component .slider-button,
.template-index slideshow-component .slider-counter__link,
.template-index slideshow-component .slideshow-cta {
  -webkit-tap-highlight-color: rgba(37, 99, 235, 0.3);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .template-index slideshow-component .slider-button,
  .template-index slideshow-component .slideshow-cta {
    border-width: 3px;
  }

  .template-index slideshow-component .slider-counter__link--dots .dot {
    border-width: 3px;
  }
}

/* Print styles - hide controls */
@media print {
  .template-index slideshow-component .slideshow__controls,
  .template-index slideshow-component .slider-button {
    display: none !important;
  }
}

/* =============================================================================
   REDUCED MOTION SUPPORT
   Respects user preferences for reduced motion animations
   ============================================================================= */

@media (prefers-reduced-motion: reduce) {
  /* Disable slideshow auto-rotation transitions */
  .template-index slideshow-component .slideshow,
  .template-index slideshow-component .slideshow__slide,
  .template-index slideshow-component .slider {
    scroll-behavior: auto;
    transition: none;
  }

  /* Disable slide animations */
  .template-index slideshow-component .slideshow__slide.animate--ambient,
  .template-index slideshow-component .slideshow__media.animate--ambient {
    animation: none;
  }

  /* Simplify button transitions */
  .template-index slideshow-component .slider-button,
  .template-index slideshow-component .slideshow-cta {
    transition: none;
  }

  /* Disable hover transforms that cause motion */
  .template-index slideshow-component .slider-button:hover,
  .template-index slideshow-component .slideshow-cta:hover {
    transform: none;
  }

  /* Disable slide-in animations */
  .template-index slideshow-component .scroll-trigger.animate--slide-in {
    animation: none;
    opacity: 1;
    transform: none;
  }
}
