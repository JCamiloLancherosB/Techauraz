/**
 * =============================================================================
 * GLOBAL BUTTON & CTA STYLES - Unified & Accessible
 * =============================================================================
 * Purpose: Ensure all buttons/CTAs across the site have:
 * - Consistent padding (min 44x44px touch targets)
 * - Sufficient contrast ratios (WCAG AA: 4.5:1)
 * - Clear hover/focus states
 * - Readability on dark backgrounds
 * - Responsive sizing
 * =============================================================================
 */

/* =============================================================================
   PRIMARY BUTTON STYLES
   ============================================================================= */

.button,
.product-form__submit,
.shopify-payment-button__button--unbranded,
button[type="submit"],
.cart__submit,
input[type="submit"] {
  /* Sizing - Touch-friendly */
  min-height: 50px;
  min-width: 120px;
  padding: 1.4rem 2.4rem;
  
  /* Colors - High contrast amber gradient for maximum visibility */
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
  color: #ffffff !important;
  
  /* Typography */
  font-size: 1.6rem;
  font-weight: 700;
  font-family: inherit;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  line-height: 1.2;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  
  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.8rem;
  
  /* Borders & Shadows - Enhanced for visibility */
  border: 2px solid transparent;
  border-radius: 10px;
  box-shadow: 0 4px 15px var(--shadow-primary);
  
  /* Transitions */
  transition: all 0.3s ease;
  
  /* Reset */
  cursor: pointer;
  text-decoration: none;
  appearance: none;
  -webkit-appearance: none;
  
  /* 
   * Ensure visibility - Critical safeguards for button display
   * These explicit declarations override conflicting styles from:
   * 
   * 1. Scroll-triggered animations:
   *    - .scroll-trigger.animate--fade-in (sets opacity: 0 initially)
   *    - .scroll-trigger.animate--slide-in (sets transform + opacity)
   * 
   * 2. Modal overlays:
   *    - .product-media-modal (z-index: -1 to 101, visibility: hidden)
   *    - .modal-backdrop (may set pointer-events: none)
   * 
   * 3. Third-party scripts:
   *    - Shopify's theme.js (may manipulate display/visibility)
   *    - Review apps (Judge.me, Loox) that may hide elements
   *    - A/B testing tools that toggle visibility
   * 
   * Without these safeguards, buttons may not display on initial page load
   * or may become unclickable when modals/overlays are active.
   */
  position: relative;
  visibility: visible;
  opacity: 1;
  pointer-events: auto;
}

/* Hover State - Enhanced visibility with brighter gradient */
.button:hover,
.product-form__submit:hover,
.shopify-payment-button__button--unbranded:hover:not([disabled]),
button[type="submit"]:hover:not(:disabled),
.cart__submit:hover:not(:disabled),
input[type="submit"]:hover:not(:disabled) {
  background: linear-gradient(135deg, #fde68a 0%, var(--color-primary) 100%);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(251, 191, 36, 0.5);
  border-color: rgba(253, 230, 138, 0.4);
  color: #ffffff !important;
}

/* Active State */
.button:active,
.product-form__submit:active,
button[type="submit"]:active,
.cart__submit:active,
input[type="submit"]:active {
  transform: translateY(0);
  box-shadow: 0 2px 8px var(--shadow-primary);
}

/* Focus State - Accessibility with high contrast outline */
.button:focus-visible,
.product-form__submit:focus-visible,
button[type="submit"]:focus-visible,
.cart__submit:focus-visible,
input[type="submit"]:focus-visible {
  outline: 3px solid var(--color-primary);
  outline-offset: 3px;
  border-color: var(--color-primary);
}

/* Disabled State */
.button:disabled,
.product-form__submit:disabled,
.product-form__submit[aria-disabled="true"],
button[type="submit"]:disabled,
.cart__submit:disabled,
input[type="submit"]:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* =============================================================================
   SECONDARY BUTTON STYLES - Subtle but visible
   ============================================================================= */

.button--secondary,
.shopify-payment-button__more-options {
  background: transparent;
  color: var(--color-text-secondary);
  border: 2px solid var(--color-border);
  box-shadow: none;
}

.button--secondary:hover {
  background: rgba(251, 191, 36, 0.1);
  border-color: var(--color-border-hover);
  color: var(--color-primary);
  box-shadow: 0 4px 12px rgba(251, 191, 36, 0.2);
}

/* =============================================================================
   TERTIARY / TEXT BUTTON STYLES
   ============================================================================= */

.button--tertiary,
.button--link,
a.link--text {
  background: transparent;
  color: var(--color-primary);
  border: none;
  box-shadow: none;
  text-decoration: underline;
  text-underline-offset: 0.3rem;
  padding: 0.8rem 1.2rem;
  min-height: 44px;
}

.button--tertiary:hover,
.button--link:hover,
a.link--text:hover {
  color: var(--color-primary-dark);
  text-decoration-thickness: 2px;
  background: transparent;
  transform: none;
}

/* =============================================================================
   ICON BUTTONS (Cart, Search, Account, etc.)
   ============================================================================= */

.header__icon,
.modal__toggle,
.cart-notification__close,
button.icon-button {
  min-width: 44px;
  min-height: 44px;
  padding: 0.8rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 8px;
  color: #e2e8f0;
  transition: all 0.2s ease;
}

.header__icon:hover,
.modal__toggle:hover,
.cart-notification__close:hover,
button.icon-button:hover {
  background: rgba(251, 191, 36, 0.1);
  border-color: var(--color-border-hover);
  color: var(--color-primary);
}

.header__icon:focus-visible,
.modal__toggle:focus-visible,
.cart-notification__close:focus-visible,
button.icon-button:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-color: var(--color-primary);
}

/* =============================================================================
   BANNER & HERO BUTTON OVERRIDES
   ============================================================================= */

.banner__buttons .button,
.image-banner__buttons .button,
.hero__button {
  /* Ensure buttons are not centered over images */
  position: relative;
  z-index: 2;
  
  /* Enhanced contrast with semi-transparent background */
  background: linear-gradient(135deg, rgba(251, 191, 36, 0.95) 0%, rgba(245, 158, 11, 0.95) 100%);
  backdrop-filter: blur(4px);
  border: 2px solid rgba(253, 230, 138, 0.4);
  color: #ffffff !important;
}

.banner__buttons .button:hover,
.image-banner__buttons .button:hover,
.hero__button:hover {
  background: linear-gradient(135deg, rgba(253, 230, 138, 0.95) 0%, rgba(251, 191, 36, 0.95) 100%);
  border-color: var(--color-primary);
  color: #ffffff !important;
}

/* =============================================================================
   RESPONSIVE ADJUSTMENTS
   ============================================================================= */

/* Mobile (<640px) */
@media screen and (max-width: 639px) {
  .button,
  .product-form__submit,
  button[type="submit"],
  .cart__submit,
  input[type="submit"] {
    font-size: 1.5rem;
    padding: 1.2rem 2rem;
    min-height: 48px;
  }
  
  /* Stack buttons vertically on mobile */
  .product-form__buttons,
  .banner__buttons {
    flex-direction: column;
    gap: 1rem;
  }
  
  .product-form__buttons .button,
  .banner__buttons .button {
    width: 100%;
  }
}

/* Tablet (640-1024px) */
@media screen and (min-width: 640px) and (max-width: 1024px) {
  .button,
  .product-form__submit,
  button[type="submit"],
  .cart__submit,
  input[type="submit"] {
    font-size: 1.6rem;
    padding: 1.3rem 2.2rem;
    min-height: 50px;
  }
}

/* Desktop (>1024px) */
@media screen and (min-width: 1025px) {
  .button,
  .product-form__submit,
  button[type="submit"],
  .cart__submit,
  input[type="submit"] {
    font-size: 1.7rem;
    padding: 1.5rem 2.5rem;
    min-height: 52px;
  }
  
  /* Horizontal button groups */
  .product-form__buttons,
  .banner__buttons {
    flex-direction: row;
    gap: 1.2rem;
  }
}

/* =============================================================================
   HIGH CONTRAST MODE SUPPORT
   ============================================================================= */

@media (prefers-contrast: high) {
  .button,
  .product-form__submit,
  button[type="submit"] {
    border-width: 3px;
    font-weight: 800;
  }
}

/* =============================================================================
   REDUCED MOTION SUPPORT
   ============================================================================= */

@media (prefers-reduced-motion: reduce) {
  .button,
  .product-form__submit,
  button[type="submit"],
  .cart__submit,
  input[type="submit"] {
    transition: none;
    transform: none !important;
  }
  
  .button:hover,
  .product-form__submit:hover,
  button[type="submit"]:hover {
    transform: none !important;
  }
}

/* =============================================================================
   FORCED COLORS MODE (Windows High Contrast)
   ============================================================================= */

@media (forced-colors: active) {
  .button,
  .product-form__submit,
  button[type="submit"] {
    border: 2px solid currentColor;
  }
  
  .button:hover,
  .product-form__submit:hover {
    background: Highlight;
    color: HighlightText;
  }
}
