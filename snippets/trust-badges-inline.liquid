{% comment %}
  Trust Badges Inline Snippet
  
  Displays configurable trust badges throughout checkout flow and product pages.
  Reduces purchase anxiety and increases conversions.
  
  Usage:
  {% render 'trust-badges-inline' %}
  {% render 'trust-badges-inline', layout: 'compact' %}
  {% render 'trust-badges-inline', show_heading: false %}
  
  Parameters:
  - layout: 'default' | 'compact' | 'minimal' (optional, default: 'default')
  - show_heading: boolean (optional, default: true)
  - context: 'product' | 'cart' | 'checkout' (optional, for styling variations)
{% endcomment %}

{%- liquid
  assign layout_class = layout | default: 'default'
  assign show_heading_flag = show_heading | default: true
  assign context_class = context | default: ''
  
  comment
    Use setting values directly - checkbox settings will be true/false
    Default to true only for nil values (settings not yet saved)
  endcomment
  if settings.trust_badge_shipping == nil
    assign show_shipping = true
  else
    assign show_shipping = settings.trust_badge_shipping
  endif
  
  if settings.trust_badge_payment == nil
    assign show_payment = true
  else
    assign show_payment = settings.trust_badge_payment
  endif
  
  if settings.trust_badge_secure == nil
    assign show_secure = true
  else
    assign show_secure = settings.trust_badge_secure
  endif
  
  if settings.trust_badge_guarantee == nil
    assign show_guarantee = true
  else
    assign show_guarantee = settings.trust_badge_guarantee
  endif
  
  if settings.trust_badge_delivery == nil
    assign show_delivery = true
  else
    assign show_delivery = settings.trust_badge_delivery
  endif
  
  assign text_shipping_default = 'sections.trust_badges.shipping' | t
  assign text_payment_default = 'sections.trust_badges.payment' | t
  assign text_secure_default = 'sections.trust_badges.secure' | t
  assign text_guarantee_default = 'sections.trust_badges.guarantee' | t
  assign text_delivery_default = 'sections.trust_badges.delivery' | t

  assign text_shipping = settings.trust_badge_shipping_text | default: text_shipping_default
  assign text_payment = settings.trust_badge_payment_text | default: text_payment_default
  assign text_secure = settings.trust_badge_secure_text | default: text_secure_default
  assign text_guarantee = settings.trust_badge_guarantee_text | default: text_guarantee_default
  assign text_delivery = settings.trust_badge_delivery_text | default: text_delivery_default
  
  assign icon_color = settings.trust_badge_icon_color | default: '#6B46C1'
  
  assign visible_badges = 0
  if show_shipping
    assign visible_badges = visible_badges | plus: 1
  endif
  if show_payment
    assign visible_badges = visible_badges | plus: 1
  endif
  if show_secure
    assign visible_badges = visible_badges | plus: 1
  endif
  if show_guarantee
    assign visible_badges = visible_badges | plus: 1
  endif
  if show_delivery
    assign visible_badges = visible_badges | plus: 1
  endif
-%}

{%- if visible_badges > 0 -%}
  {{ 'trust-badges.css' | asset_url | stylesheet_tag }}
  
  <div 
    class="trust-badges-inline trust-badges-inline--{{ layout_class }}{% if context_class != '' %} trust-badges-inline--{{ context_class }}{% endif %}"
    style="--trust-badge-icon-color: {{ icon_color }};"
  >
    {%- if show_heading_flag and layout_class != 'compact' and layout_class != 'minimal' -%}
      <p class="trust-badges-inline__heading">{{ 'sections.trust_badges.heading' | t }}</p>
    {%- endif -%}
    
    <div class="trust-badges-inline__grid">
      {%- if show_shipping -%}
        <div class="trust-badges-inline__item">
          <span class="trust-badges-inline__icon">
            {%- render 'icon-trust-shipping' -%}
          </span>
          <span class="trust-badges-inline__text">{{ text_shipping }}</span>
        </div>
      {%- endif -%}
      
      {%- if show_payment -%}
        <div class="trust-badges-inline__item">
          <span class="trust-badges-inline__icon">
            {%- render 'icon-trust-payment' -%}
          </span>
          <span class="trust-badges-inline__text">{{ text_payment }}</span>
        </div>
      {%- endif -%}
      
      {%- if show_secure -%}
        <div class="trust-badges-inline__item">
          <span class="trust-badges-inline__icon">
            {%- render 'icon-trust-secure' -%}
          </span>
          <span class="trust-badges-inline__text">{{ text_secure }}</span>
        </div>
      {%- endif -%}
      
      {%- if show_guarantee -%}
        <div class="trust-badges-inline__item">
          <span class="trust-badges-inline__icon">
            {%- render 'icon-trust-guarantee' -%}
          </span>
          <span class="trust-badges-inline__text">{{ text_guarantee }}</span>
        </div>
      {%- endif -%}
      
      {%- if show_delivery -%}
        <div class="trust-badges-inline__item">
          <span class="trust-badges-inline__icon">
            {%- render 'icon-trust-delivery' -%}
          </span>
          <span class="trust-badges-inline__text">{{ text_delivery }}</span>
        </div>
      {%- endif -%}
    </div>
  </div>
{%- endif -%}
